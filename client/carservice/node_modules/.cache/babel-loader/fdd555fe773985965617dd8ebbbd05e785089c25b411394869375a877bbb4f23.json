{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from '../axios';\nexport const createReview = createAsyncThunk('reviews/createReview', async ({\n  orderId,\n  reviewData\n}) => {\n  const {\n    data\n  } = await axios.post(`/reviews/${orderId}/create`, reviewData);\n  return data;\n});\nexport const deleteReview = createAsyncThunk('reviews/deleteReview', async reviewId => {\n  await axios.delete(`/reviews/${reviewId}/delete`);\n  return reviewId;\n});\nexport const updateReview = createAsyncThunk('reviews/updateReview', async ({\n  reviewId,\n  updatedData\n}) => {\n  const {\n    data\n  } = await axios.patch(`/reviews/${reviewId}/update`, updatedData);\n  return data;\n});\nexport const fetchAllReviews = createAsyncThunk('reviews/fetchAllReviews', async () => {\n  const {\n    data\n  } = await axios.get('/reviews');\n  return data;\n});\nconst initialState = {\n  reviews: [],\n  status: 'idle',\n  error: null\n};\nconst reviewsSlice = createSlice({\n  name: 'reviews',\n  initialState,\n  reducers: {},\n  extraReducers: builder => {\n    builder.addCase(createReview.pending, state => {\n      state.status = 'loading';\n    }).addCase(createReview.fulfilled, (state, action) => {\n      state.reviews.push(action.payload);\n      state.status = 'succeeded';\n    }).addCase(createReview.rejected, (state, action) => {\n      state.status = 'failed';\n      state.error = action.error.message;\n    }).addCase(deleteReview.fulfilled, (state, action) => {\n      state.reviews = state.reviews.filter(review => review._id !== action.payload);\n      state.status = 'succeeded';\n    }).addCase(updateReview.fulfilled, (state, action) => {\n      const index = state.reviews.findIndex(review => review._id === action.payload._id);\n      if (index !== -1) {\n        state.reviews[index] = action.payload;\n      }\n      state.status = 'succeeded';\n    }).addCase(fetchAllReviews.pending, state => {\n      state.status = 'loading';\n    }).addCase(fetchAllReviews.fulfilled, (state, action) => {\n      state.reviews = action.payload;\n      state.status = 'succeeded';\n    }).addCase(fetchAllReviews.rejected, (state, action) => {\n      state.status = 'failed';\n      state.error = action.error.message;\n    });\n  }\n});\nexport const reviewsReducer = reviewsSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","createReview","orderId","reviewData","data","post","deleteReview","reviewId","delete","updateReview","updatedData","patch","fetchAllReviews","get","initialState","reviews","status","error","reviewsSlice","name","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","push","payload","rejected","message","filter","review","_id","index","findIndex","reviewsReducer","reducer"],"sources":["C:/Users/g_dra/Desktop/razrabotka_web_prilozenia_dlya_stancii_tehnicheskogo_obsluzhivania/client/carservice/src/redux/slices/reviews.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport axios from '../axios';\r\n\r\nexport const createReview = createAsyncThunk(\r\n    'reviews/createReview',\r\n    async ({ orderId, reviewData }) => {\r\n        const { data } = await axios.post(`/reviews/${orderId}/create`, reviewData);\r\n        return data;\r\n    }\r\n);\r\n\r\nexport const deleteReview = createAsyncThunk(\r\n    'reviews/deleteReview',\r\n    async (reviewId) => {\r\n        await axios.delete(`/reviews/${reviewId}/delete`);\r\n        return reviewId;\r\n    }\r\n);\r\n\r\nexport const updateReview = createAsyncThunk(\r\n    'reviews/updateReview',\r\n    async ({ reviewId, updatedData }) => {\r\n        const { data } = await axios.patch(`/reviews/${reviewId}/update`, updatedData);\r\n        return data;\r\n    }\r\n);\r\n\r\nexport const fetchAllReviews = createAsyncThunk(\r\n    'reviews/fetchAllReviews',\r\n    async () => {\r\n        const { data } = await axios.get('/reviews');\r\n        return data;\r\n    }\r\n);\r\n\r\nconst initialState = {\r\n    reviews: [],\r\n    status: 'idle',\r\n    error: null\r\n};\r\n\r\nconst reviewsSlice = createSlice({\r\n    name: 'reviews',\r\n    initialState,\r\n    reducers: {},\r\n    extraReducers: (builder) => {\r\n        builder\r\n            .addCase(createReview.pending, (state) => {\r\n                state.status = 'loading';\r\n            })\r\n            .addCase(createReview.fulfilled, (state, action) => {\r\n                state.reviews.push(action.payload);\r\n                state.status = 'succeeded';\r\n            })\r\n            .addCase(createReview.rejected, (state, action) => {\r\n                state.status = 'failed';\r\n                state.error = action.error.message;\r\n            })\r\n\r\n            .addCase(deleteReview.fulfilled, (state, action) => {\r\n                state.reviews = state.reviews.filter(review => review._id !== action.payload);\r\n                state.status = 'succeeded';\r\n            })\r\n\r\n            .addCase(updateReview.fulfilled, (state, action) => {\r\n                const index = state.reviews.findIndex(review => review._id === action.payload._id);\r\n                if (index !== -1) {\r\n                    state.reviews[index] = action.payload;\r\n                }\r\n                state.status = 'succeeded';\r\n            })\r\n\r\n            .addCase(fetchAllReviews.pending, (state) => {\r\n                state.status = 'loading';\r\n            })\r\n            .addCase(fetchAllReviews.fulfilled, (state, action) => {\r\n                state.reviews = action.payload;\r\n                state.status\r\n                    = 'succeeded';\r\n            })\r\n            .addCase(fetchAllReviews.rejected, (state, action) => {\r\n                state.status = 'failed';\r\n                state.error = action.error.message;\r\n            });\r\n    }\r\n});\r\n\r\nexport const reviewsReducer = reviewsSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}