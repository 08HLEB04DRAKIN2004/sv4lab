{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\g_dra\\\\Desktop\\\\LABSSVZ\\\\client\\\\carservice\\\\src\\\\components\\\\register.jsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Button, TextField, Paper, Typography, Container } from '@mui/material';\nimport { fetchRegister, selectIsAuth } from '../redux/slices/auth';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Navigate } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RegistrationPage = () => {\n  _s();\n  var _errors$userName, _errors$userName2, _errors$phoneNumber, _errors$phoneNumber2, _errors$password, _errors$password2;\n  const isAuth = useSelector(selectIsAuth);\n  const dispatch = useDispatch();\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors,\n      isValid\n    }\n  } = useForm({\n    defaultValues: {\n      userName: '',\n      phoneNumber: '',\n      password: '',\n      role: 'user'\n    },\n    mode: 'onChange'\n  });\n  const onSubmit = async values => {\n    const completeValues = {\n      ...values,\n      role: 'user'\n    };\n    const data = await dispatch(fetchRegister(completeValues));\n    if (!data.payload) {\n      return alert('Не удалось зарегестрироваться');\n    }\n    if ('token' in data.payload) {\n      window.localStorage.setItem('token', data.payload.token);\n    }\n  };\n  console.log('isAuth', isAuth);\n  if (isAuth) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    style: {\n      marginTop: '30px'\n    },\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 3,\n      style: {\n        padding: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        component: \"h1\",\n        variant: \"h5\",\n        children: \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit(onSubmit),\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          variant: \"outlined\",\n          margin: \"normal\",\n          required: true,\n          fullWidth: true,\n          id: \"username\",\n          label: \"\\u0418\\u043C\\u044F \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\",\n          name: \"username\",\n          autoComplete: \"username\",\n          autoFocus: true,\n          error: Boolean((_errors$userName = errors.userName) === null || _errors$userName === void 0 ? void 0 : _errors$userName.message),\n          helperText: (_errors$userName2 = errors.userName) === null || _errors$userName2 === void 0 ? void 0 : _errors$userName2.message,\n          ...register('userName', {\n            required: 'Укажите имя',\n            minLength: {\n              value: 2,\n              message: \"Name is too short\"\n            }\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          variant: \"outlined\",\n          margin: \"normal\",\n          required: true,\n          fullWidth: true,\n          type: \"tel\",\n          id: \"phoneNumber\",\n          label: \"\\u041D\\u043E\\u043C\\u0435\\u0440 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430\",\n          name: \"phoneNumber\",\n          autoComplete: \"tel\",\n          autoFocus: true,\n          error: Boolean((_errors$phoneNumber = errors.phoneNumber) === null || _errors$phoneNumber === void 0 ? void 0 : _errors$phoneNumber.message),\n          helperText: (_errors$phoneNumber2 = errors.phoneNumber) === null || _errors$phoneNumber2 === void 0 ? void 0 : _errors$phoneNumber2.message,\n          ...register('phoneNumber', {\n            required: 'Укажите номер телефона'\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          variant: \"outlined\",\n          margin: \"normal\",\n          required: true,\n          fullWidth: true,\n          name: \"password\",\n          label: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n          type: \"password\",\n          id: \"password\",\n          autoComplete: \"current-password\",\n          error: Boolean((_errors$password = errors.password) === null || _errors$password === void 0 ? void 0 : _errors$password.message),\n          helperText: (_errors$password2 = errors.password) === null || _errors$password2 === void 0 ? void 0 : _errors$password2.message,\n          ...register('password', {\n            required: 'Укажите пароль'\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          disabled: !isValid,\n          type: \"submit\",\n          fullWidth: true,\n          variant: \"contained\",\n          color: \"primary\",\n          style: {\n            marginTop: '10px'\n          },\n          children: \"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          sx: {\n            mt: 2,\n            textAlign: 'center'\n          },\n          children: [\"\\u0423\\u0436\\u0435 \\u0437\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u044B?\", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/login\",\n            style: {\n              textDecoration: 'none',\n              color: '#3f51b5'\n            },\n            children: \"\\u0412\\u043E\\u0439\\u0442\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 9\n  }, this);\n};\n_s(RegistrationPage, \"Tbo/MiAWgjVdfWj9xa0cFdD1B0A=\", false, function () {\n  return [useSelector, useDispatch, useForm];\n});\n_c = RegistrationPage;\nexport default RegistrationPage;\nvar _c;\n$RefreshReg$(_c, \"RegistrationPage\");","map":{"version":3,"names":["React","Button","TextField","Paper","Typography","Container","fetchRegister","selectIsAuth","useDispatch","useSelector","Navigate","useForm","Link","jsxDEV","_jsxDEV","RegistrationPage","_s","_errors$userName","_errors$userName2","_errors$phoneNumber","_errors$phoneNumber2","_errors$password","_errors$password2","isAuth","dispatch","register","handleSubmit","formState","errors","isValid","defaultValues","userName","phoneNumber","password","role","mode","onSubmit","values","completeValues","data","payload","alert","window","localStorage","setItem","token","console","log","to","fileName","_jsxFileName","lineNumber","columnNumber","component","maxWidth","style","marginTop","children","elevation","padding","variant","margin","required","fullWidth","id","label","name","autoComplete","autoFocus","error","Boolean","message","helperText","minLength","value","type","disabled","color","sx","mt","textAlign","textDecoration","_c","$RefreshReg$"],"sources":["C:/Users/g_dra/Desktop/LABSSVZ/client/carservice/src/components/register.jsx"],"sourcesContent":["import React from 'react';\r\nimport { Button, TextField, Paper, Typography, Container } from '@mui/material';\r\nimport { fetchRegister, selectIsAuth } from '../redux/slices/auth';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { useForm } from 'react-hook-form';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst RegistrationPage = () => {\r\n    const isAuth = useSelector(selectIsAuth)\r\n    const dispatch = useDispatch();\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        formState: { errors, isValid }\r\n    } = useForm({\r\n        defaultValues: {\r\n            userName: '',\r\n            phoneNumber: '',\r\n            password: '',\r\n            role: 'user',\r\n        },\r\n        mode: 'onChange',\r\n    });\r\n\r\n    const onSubmit = async (values) => {\r\n        const completeValues = { ...values, role: 'user' };\r\n        const data = await dispatch(fetchRegister(completeValues));\r\n\r\n        if (!data.payload) {\r\n            return alert('Не удалось зарегестрироваться');\r\n        }\r\n\r\n        if ('token' in data.payload) {\r\n            window.localStorage.setItem('token', data.payload.token)\r\n        }\r\n    };\r\n\r\n    console.log('isAuth', isAuth);\r\n\r\n    if (isAuth) {\r\n        return <Navigate to='/' />;\r\n    }\r\n\r\n    return (\r\n        <Container component=\"main\" maxWidth=\"xs\" style={{ marginTop: '30px' }}>\r\n            <Paper elevation={3} style={{ padding: '20px' }}>\r\n                <Typography component=\"h1\" variant=\"h5\">\r\n                    Регистрация\r\n                </Typography>\r\n                <form onSubmit={handleSubmit(onSubmit)}>\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        margin=\"normal\"\r\n                        required\r\n                        fullWidth\r\n                        id=\"username\"\r\n                        label=\"Имя пользователя\"\r\n                        name=\"username\"\r\n                        autoComplete=\"username\"\r\n                        autoFocus\r\n                        error={Boolean(errors.userName?.message)}\r\n                        helperText={errors.userName?.message}\r\n                        {...register('userName', { required: 'Укажите имя', minLength: { value: 2, message: \"Name is too short\" } })}\r\n                    />\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        margin=\"normal\"\r\n                        required\r\n                        fullWidth\r\n                        type='tel'\r\n                        id=\"phoneNumber\"\r\n                        label=\"Номер телефона\"\r\n                        name=\"phoneNumber\"\r\n                        autoComplete=\"tel\"\r\n                        autoFocus\r\n                        error={Boolean(errors.phoneNumber?.message)}\r\n                        helperText={errors.phoneNumber?.message}\r\n                        {...register('phoneNumber', { required: 'Укажите номер телефона' })}\r\n                    />\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        margin=\"normal\"\r\n                        required\r\n                        fullWidth\r\n                        name=\"password\"\r\n                        label=\"Пароль\"\r\n                        type=\"password\"\r\n                        id=\"password\"\r\n                        autoComplete=\"current-password\"\r\n                        error={Boolean(errors.password?.message)}\r\n                        helperText={errors.password?.message}\r\n                        {...register('password', { required: 'Укажите пароль' })}\r\n                    />\r\n                    <Button\r\n                        disabled={!isValid}\r\n                        type=\"submit\"\r\n                        fullWidth\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        style={{ marginTop: '10px' }}\r\n                    >\r\n                        Зарегистрироваться\r\n                    </Button>\r\n                    <Typography variant=\"body2\" sx={{ mt: 2, textAlign: 'center' }}>\r\n                        Уже зарегистрированы?\r\n                        <Link to=\"/login\" style={{ textDecoration: 'none', color: '#3f51b5' }}>\r\n                            Войти\r\n                        </Link>\r\n                    </Typography>\r\n                </form>\r\n            </Paper>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default RegistrationPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}